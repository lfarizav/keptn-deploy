---
apiVersion: lifecycle.keptn.sh/v1
kind: KeptnTaskDefinition
metadata:
  name: wait-for-bsf-pcf-nssf
  namespace: keptn-system
spec:
  serviceAccount:
    name: wait-for-pod
  retries: 3
  timeout: 5m
  container:
    name: wait
    image: bitnami/kubectl:latest
    command:
      - /bin/bash
      - -c
      - |
        echo "Waiting for BSF, PCF, and NSSF to be ready..."
        kubectl wait --for=condition=ready pod -l app=open5gs,nf=bsf -n k8s-open5gs --timeout=300s
        kubectl wait --for=condition=ready pod -l app=open5gs,nf=pcf -n k8s-open5gs --timeout=300s
        kubectl wait --for=condition=ready pod -l app=open5gs,nf=nssf -n k8s-open5gs --timeout=300s
        echo "âœ“ BSF, PCF, and NSSF are ready"
