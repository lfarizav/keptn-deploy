---
apiVersion: lifecycle.keptn.sh/v1
kind: KeptnTaskDefinition
metadata:
  name: wait-for-ausf-udm-udr
  namespace: keptn-system
spec:
  serviceAccount:
    name: wait-for-pod
  retries: 3
  timeout: 5m
  container:
    name: wait
    image: bitnami/kubectl:latest
    command:
      - /bin/bash
      - -c
      - |
        echo "Waiting for AUSF, UDM, and UDR to be ready..."
        kubectl wait --for=condition=ready pod -l app=open5gs,nf=ausf -n k8s-open5gs --timeout=300s
        kubectl wait --for=condition=ready pod -l app=open5gs,nf=udm -n k8s-open5gs --timeout=300s
        kubectl wait --for=condition=ready pod -l app=open5gs,nf=udr -n k8s-open5gs --timeout=300s
        echo "âœ“ AUSF, UDM, and UDR are ready"
